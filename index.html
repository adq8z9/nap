<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Nap - Nostr accounting program</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index_style.css">
    <script src="index_script.js"></script>
    <script src="nostr_tools.js"></script>
  </head>

  <body onload="defaultOpen()">

    <div class="topnav">
      <h1 id="topNavTitle">Nostr accounting program (nap)</h1>
      <p style="color:red">Note: This tool is just a test-program. Don't use it for real application and just with a throw-away nsec!</p>
    </div>
    
    <div style="overflow:auto">
      <div class="menu">
        <a class="menu_point active" onclick="openView(event, 'reports')" id="defaultOpen" href="#reports">Reports</a>
        <a class="menu_point" onclick="openView(event, 'postings')" href="#postings">Ledger Postings</a>
        <a class="menu_point" onclick="openView(event, 'ledger')" href="#ledger">Ledger</a>
        <a class="menu_point" onclick="openView(event, 'logIn')" href="#logIn">Log In</a>
      </div>
      
      <div id="reports" class="main">
        <h2 class="mainTitle">General Overview</h2>
        <p class="mainText">tbd - Sankey Chart</p>
      </div>

      <div id="postings" class="main">
        <h2 class="mainTitle">Ledger Postings</h2>
        <p class="mainText">tbd - List of ledger postings and create new posting</p>
      </div>

      <div id="ledger" class="main">
        <h2 class="mainTitle">View Ledger</h2>
        <p class="mainText">tbd - Overview Ledger characteristics</p>
      </div>
	    
      <div id="logIn" class="main">
        <h2 class="mainTitle">Log In</h2>
	<h3 class="mainSubTitle">log in nostr account:</h3>
	<p class="mainText" id="npubLoginInfo">Currently logged in npub: no nostr account logged in</p>
        <p class="mainText">Log in with nip19 nsec1...:<br>(Get a throw-away nsec, e.g. here <a href="https://nak.nostr.com/" style="color:#606770">https://nak.nostr.com/</a>)</p>
        <input type="text" placeholder="log in with nsec1..." class="mainText" id="npubLoginInput">
        <button onclick="logInNpub()">Log In</button>
        <p class="mainText" id="npubLoginInputFeedback"></p>
        <h3 class="mainSubTitle">select accounting ledger:</h3>
	<p class="mainText" id="LedgerLoginInfo">Currently used accounting ledger: no accounting ledger selected<br></p>
        <p class="mainText">Select ledger event with nip19 naddr1...:</p>
        <input type="text" placeholder="select ledger with naddr1..." class="mainText" id="ledgerLoginInput">
        <button onclick="logInLedger()">Select</button>
        <p class="mainText" id="ledgerLoginInputFeedback"></p>
        <p>or</p><button onclick="createAndLogInLedger()">Create simple example ledger and select</button>
        <p class="mainText" id="ledgerCreateLoginInputFeedback"></p>
      </div>

      <div class="right">
        <h2>Current Context</h2>
        <h3 id="header_npub_right">logged in npub</h3>
        <p id="npub_right">not logged in</p>
        <h3 id="header_ledger_right">logged in accounting ledger</h3>
        <p id="ledger_right">no accounting ledger selected</p>
        <h3 id="header_relay_right">used relay(s) for acc ledger</h3>
        <p id="relay_right">not accounting ledger selected</p>
      </div>
    </div>

    <div class="bottomnav">
      <h4 class="bottomNavHeader">Le accounting NUD - fan:</h4>
      <a class="bottomNavLink" href="https://github.com/adq8z9/le_accounting_nud">https://github.com/adq8z9/le_accounting_nud</a>
      <h4 class="bottomNavHeader">Nostr protocol:</h4>
      <a class="bottomNavLink" href="https://github.com/nostr-protocol/nips">https://github.com/nostr-protocol/nips</a>
    </div>

  </body>
</html>
